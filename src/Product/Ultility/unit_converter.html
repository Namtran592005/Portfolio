<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chuyển đổi Đơn vị - Công cụ Tiện ích</title>
    <style>
        :root {
            --primary-bg: #f8f9fa;
            --secondary-bg: #ffffff;
            --text-color: #212529;
            --light-text-color: #6c757d;
            --border-color: #dee2e6;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --primary-color: #0d6efd;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; background-color: #f0f2f5; color: var(--text-color); }
        .container { max-width: 600px; margin: 20px auto; padding: 20px; background-color: var(--secondary-bg); border-radius: 8px; box-shadow: 0 2px 10px var(--shadow-color); }
        h1 { text-align: center; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 500; margin-bottom: 5px; }
        input[type="number"], select { width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 1em; box-sizing: border-box; }
        .converter-row { display: flex; align-items: center; gap: 15px; }
        .equals { font-size: 2em; font-weight: bold; }
        .result { margin-top: 30px; padding: 20px; background-color: #e2e3e5; border-radius: 8px; text-align: center; font-size: 1.5em; font-weight: bold; }
        .back-link { display: inline-block; margin-bottom: 20px; color: var(--primary-color); text-decoration: none; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">← Quay lại trang chủ</a>
        <h1>Chuyển đổi Đơn vị</h1>

        <div class="form-group">
            <label for="category">Loại chuyển đổi</label>
            <select id="category">
                <option value="length">Chiều dài</option>
                <option value="weight">Khối lượng</option>
                <option value="temperature">Nhiệt độ</option>
            </select>
        </div>

        <div class="converter-row">
            <div class="form-group" style="flex: 2;">
                <label for="inputValue">Giá trị</label>
                <input type="number" id="inputValue" value="1">
            </div>
            <div class="form-group" style="flex: 3;">
                <label for="fromUnit">Từ</label>
                <select id="fromUnit"></select>
            </div>
            <div class="equals">=</div>
            <div class="form-group" style="flex: 3;">
                <label for="toUnit">Sang</label>
                <select id="toUnit"></select>
            </div>
        </div>

        <div id="result" class="result">...</div>
    </div>

    <script>
        const units = {
            length: { name: 'Chiều dài', units: { 'm': 'Mét (m)', 'km': 'Kilômét (km)', 'cm': 'Centimét (cm)', 'mm': 'Milimét (mm)', 'mi': 'Dặm (mile)', 'ft': 'Feet' } },
            weight: { name: 'Khối lượng', units: { 'kg': 'Kilôgam (kg)', 'g': 'Gam (g)', 'mg': 'Miligam (mg)', 't': 'Tấn (t)', 'lb': 'Pound (lb)' } },
            temperature: { name: 'Nhiệt độ', units: { 'c': 'Độ C (°C)', 'f': 'Độ F (°F)', 'k': 'Độ K (Kelvin)' } }
        };

        const factors = {
            length: { m: 1, km: 1000, cm: 0.01, mm: 0.001, mi: 1609.34, ft: 0.3048 },
            weight: { kg: 1, g: 0.001, mg: 0.000001, t: 1000, lb: 0.453592 }
        };

        const categorySelect = document.getElementById('category');
        const fromUnitSelect = document.getElementById('fromUnit');
        const toUnitSelect = document.getElementById('toUnit');
        const inputValue = document.getElementById('inputValue');
        const resultDiv = document.getElementById('result');

        function populateUnits() {
            const category = categorySelect.value;
            const unitData = units[category].units;

            fromUnitSelect.innerHTML = '';
            toUnitSelect.innerHTML = '';

            for (const key in unitData) {
                fromUnitSelect.innerHTML += `<option value="${key}">${unitData[key]}</option>`;
                toUnitSelect.innerHTML += `<option value="${key}">${unitData[key]}</option>`;
            }
            // Set default different units
            fromUnitSelect.selectedIndex = 0;
            toUnitSelect.selectedIndex = 1;

            convert();
        }

        function convert() {
            const category = categorySelect.value;
            const from = fromUnitSelect.value;
            const to = toUnitSelect.value;
            const value = parseFloat(inputValue.value);

            if (isNaN(value)) {
                resultDiv.textContent = 'Giá trị không hợp lệ';
                return;
            }

            let result;

            if (category === 'temperature') {
                if (from === to) {
                    result = value;
                } else if (from === 'c') {
                    if (to === 'f') result = (value * 9/5) + 32;
                    else if (to === 'k') result = value + 273.15;
                } else if (from === 'f') {
                    if (to === 'c') result = (value - 32) * 5/9;
                    else if (to === 'k') result = (value - 32) * 5/9 + 273.15;
                } else if (from === 'k') {
                    if (to === 'c') result = value - 273.15;
                    else if (to === 'f') result = (value - 273.15) * 9/5 + 32;
                }
            } else {
                const fromFactor = factors[category][from];
                const toFactor = factors[category][to];
                const valueInBase = value * fromFactor;
                result = valueInBase / toFactor;
            }
            
            resultDiv.textContent = result.toLocaleString(undefined, { maximumFractionDigits: 5 });
        }

        categorySelect.addEventListener('change', populateUnits);
        fromUnitSelect.addEventListener('change', convert);
        toUnitSelect.addEventListener('change', convert);
        inputValue.addEventListener('input', convert);

        document.addEventListener('DOMContentLoaded', populateUnits);
    </script>
</body>
</html>